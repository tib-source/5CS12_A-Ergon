{%extends 'Bookings/base_main.html'%} {% block content %}

{{staff_all|json_script:"staff_data"}}
{{students_all|json_script:"student_data"}}

<script>

    /* 

    INSPIRED BY THE FOLLOWING ARTICLE : https://webdesign.tutsplus.com/how-to-create-a-sortable-html-table-with-javascript--cms-92993t
    
    */
    let studentData = JSON.parse(JSON.parse(document.getElementById("student_data").textContent))
    let staffData = JSON.parse(JSON.parse(document.getElementById("staff_data").textContent))

    let tableButtons;
    let studentContent;
    let staffContent;
    let isAdmin;
    const createRow = (obj, objKeys) => {
        const row = document.createElement("tr");
        objKeys.map((key) => {
            populateRow(row, obj[key], key);
        });
        // TODO: GET THE BOOKING BUTTON WORKING 

        if (!isAdmin) {
            const bookingButton = document.createElement("Button");
            bookingButton.innerHTML = "Book"
            bookingButton.classList.add("styled__button")
            bookingButton.onclick = (() => toggleBookingModal(obj["id"]))
            row.appendChild(bookingButton)
        } else {
            const adminButtonsContainer = document.createElement('div')
            adminButtonsContainer.classList.add("equipment__admin")

            const editButton = document.createElement("Button");
            editButton.innerHTML = "Edit"
            editButton.classList.add("styled__button")
            editButton.classList.add("equipment__edit")
            editButton.onclick = (() => toggleEditModal(obj, obj['department']))
            adminButtonsContainer.appendChild(editButton)

            const deleteButton = document.createElement("Button");
            deleteButton.innerHTML = "Delete"
            deleteButton.classList.add("styled__button")
            deleteButton.classList.add("equipment__delete")
            deleteButton.onclick = (() => toggleDeleteModal(obj))
            adminButtonsContainer.appendChild(deleteButton)


            row.appendChild(adminButtonsContainer)
        }

        return row;
    };

    const toggleBookingModal = (id) => {
        if (id) {
            // Preselect the item from the drop down for the user
            const dropdown = document.getElementById('bookingDropdown')
            dropdown.value = id;
        }
        toggleModal('booking-modal')
    }


    const toggleModal = (id) => {
        const modal = document.getElementById(id)
        modal.style.visibility = modal.style.visibility == "hidden" ? 'visible' : 'hidden';
        let overlay = document.getElementById('modal_overlay')
        overlay.style.display = overlay.style.display == "none" ? "block" : "none"
    }

    const toggleStaffAddModal = () => {
        toggleModal('new_staff_modal')
    }
    const toggleStudentAddModal = () => {
        toggleModal('new_student_modal')
    }
    const toggleDeleteModal = (obj) => {
        if (obj) {
            document.getElementById('delete_id').value = obj['id']
            document.getElementById('delete_confirm_text').textContent = `Are you sure you want to delete - ${obj['first_name'] } ${obj['last_name'] }?`
        }
        toggleModal('delete_modal')
    }

    const toggleEditModal = (obj, staff) => {
        if (obj) {

            if(staff){
            document.getElementById("update_first_name").value = obj['first_name']
            document.getElementById("update_last_name").value = obj['last_name']
            document.getElementById("update_email").value = obj['email']
            document.getElementById("update_username").value = obj['username']
            document.getElementById("update_department").value = obj['department']
            document.getElementById("update_id").value = obj['id']
            document.getElementById("update_staff_id").value = obj['staff_id']
            document.getElementById("update_role").checked = obj['is_staff']
            }else{
            document.getElementById("student_update_id").value = obj['id']
            document.getElementById("student_update_first_name").value = obj['first_name']
            document.getElementById("student_update_last_name").value = obj['last_name']
            document.getElementById("student_update_email").value = obj['email']
            document.getElementById("student_update_username").value = obj['username']
            document.getElementById("student_update_current_course").value =  obj['current_course']
            document.getElementById("student_update_student_id").value = obj['student_id']
            }
        }

        if(staff){
            toggleModal('edit_modal')
        }else{
            toggleModal('student_edit_modal')
        }

    }


    const populateRow = (row, item, key = "id") => {
        const cell = document.createElement("td");
        if (key == "status") {
            cell.classList.add("status")
            const span = document.createElement('span')
            span.innerHTML = item
            if (item == "On Loan") {
                span.classList.add("status__loan")
            } else span.classList.add(`status__${item.toLowerCase()}`)



            item = span.outerHTML
        }
        cell.setAttribute("data-attr", key);
        cell.innerHTML = item;
        row.appendChild(cell);
    };

    const getTableContent = (data, table, staff) => {
        let objKeys = ['id','username', 'first_name', 'last_name', 'student_id', 'current_course', 'is_staff']
        if (staff) {
            objKeys = ['id','username', 'first_name', 'last_name', 'staff_id', 'department', 'is_staff']
        }
        data.map((obj) => {
            const row = createRow(obj, objKeys);
            table.appendChild(row);
        });
    };


    const sortRow = (data, row, direction = "asc") => {
        // Clear out the table first 
        tableContent.innerHTML = ""
        // Use the direction to perform sorting
        const sortedData = direction == 'asc' ?
            [...data].sort(function (curr, next) {
                if (curr[row] > next[row]) {
                    return -1;
                } else if (curr[row] < next[row]) {
                    return 1;
                } else {
                    return 0;
                }
            }) : [...data].sort(function (curr, next) {
                if (curr[row] > next[row]) {
                    return 1;
                } else if (curr[row] < next[row]) {
                    return -1;
                } else {
                    return 0;
                }
            })
        getTableContent(sortedData);
    }


    const resetButtons = (event) => {
        [...tableButtons].map((button) => {
            if (button !== event.target) {
                button.removeAttribute('data-dir')
            }
        })
    }





    const handleDelete = (e) => {
        let deleteId = document.getElementById('delete_id').value
        let csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;


        fetch('/api/user/delete', {
            method: "POST",
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
            body: JSON.stringify({
                id: deleteId,
            })
        }).then(response => {

            console.log('Delete request sent successfully');
            location.reload()
        })
            .catch(error => {
                // Handle error
                console.error('Error sending delete request:', error);
            });

    }


    const handleStaffEdit = (e) => {
        const id = document.getElementById('update_id').value;
        const firstName = document.getElementById('update_first_name').value;
        const lastName = document.getElementById('update_last_name').value;
        const username = document.getElementById('update_username').value;
        const department = document.getElementById('update_department').value;
        const staffId = document.getElementById('update_staff_id').value;
        const email = document.getElementById('update_email').value;
        // const password1 = document.getElementById('update_password1').value;
        // const password2 = document.getElementById('update_password2').value;
        const isStaff = document.getElementById('update_role').checked;

        let csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;


        const postData = {
        first_name: firstName,
        last_name: lastName,
        username,
        department,
        staff_id: staffId, 
        email,
        is_staff: isStaff,
        user_type: "staff",
        id
    }

        console.log(postData)
        fetch('/api/user/update', {
            method: "PUT",
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
            body: JSON.stringify(postData)
        })
            .then(response => {

                console.log('Equipment Creation request sent successfully');
                 // Close the modal after successful submission
                location.reload()
            })
            .catch(error => {
                // Handle error
                console.error('Error sending equipment creation request:', error);
            });
    }

    const handleStudentEdit = (e) => {
        const id = document.getElementById('student_update_id').value;
        const firstName = document.getElementById('student_update_first_name').value;
        const lastName = document.getElementById('student_update_last_name').value;
        const username = document.getElementById('student_update_username').value;
        const current_course = document.getElementById('student_update_current_course').value;
        const student_id = document.getElementById('student_update_student_id').value;
        const email = document.getElementById('student_update_email').value;
        // const password1 = document.getElementById('update_password1').value;
        // const password2 = document.getElementById('update_password2').value;

        let csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;


        const postData = {
        first_name: firstName,
        last_name: lastName,
        username,
        current_course,
        student_id,
        email,
        user_type: "student",
        id
    }

        console.log(postData)
        fetch('/api/user/update', {
            method: "PUT",
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
            body: JSON.stringify(postData)
        })
            .then(response => {

                console.log('Equipment Creation request sent successfully');
                location.reload()
            })
            .catch(error => {
                // Handle error
                console.error('Error sending equipment creation request:', error);
            });
    }

    function handleStaffAdd() {
    // Get input values
    const firstName = document.getElementById('id_first_name').value;
    const lastName = document.getElementById('id_last_name').value;
    const username = document.getElementById('id_username').value;
    const department = document.getElementById('id_current_department').value;
    const staffId = document.getElementById('id_staff').value;
    const email = document.getElementById('id_email').value;
    const password1 = document.getElementById('id_password1').value;
    const password2 = document.getElementById('id_password2').value;
    const isStaff = document.getElementById('id_role').checked;
    let csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;

    // Validate passwords
    if (password1 !== password2) {
        console.error('Passwords do not match.');
        return;
    }

    // Prepare form data
    const postData = {
        first_name: firstName,
        last_name: lastName,
        username,
        department,
        staff_id: staffId, 
        email,
        password1,
        password2,
        user_type: "staff"
    }

    // Send POST request to server
    fetch('/api/user/new', {
        headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
        method: 'POST',
        body: JSON.stringify(postData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Refresh page or perform other actions on success
            location.reload();
        } else {
            // Display error message or handle errors
            console.error('Error:', data.message);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}



function handleStudentAdd() {
    // Get input values
    const first_name = document.getElementById('student_first_name').value;
    const last_name = document.getElementById('student_last_name').value;
    const username = document.getElementById('student_username').value;
    const current_course = document.getElementById('student_current_course').value;
    const student_id = document.getElementById('add_student_id').value;
    const email = document.getElementById('student_email').value;
    const password1 = document.getElementById('student_password1').value;
    const password2 = document.getElementById('student_password2').value;
    let csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;

    // Validate passwords
    if (password1 !== password2) {
        console.error('Passwords do not match.');
        return;
    }

    // Prepare form data
    const postData = {
        first_name,
        last_name,
        username,
        current_course,
        student_id, 
        email,
        password1,
        password2,
        user_type: "student"
    }

    // Send POST request to server
    fetch('/api/user/new', {
        headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrfToken
            },
        method: 'POST',
        body: JSON.stringify(postData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Refresh page or perform other actions on success
            location.reload();
        } else {
            // Display error message or handle errors
            console.error('Error:', data.message);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}


    window.addEventListener("load", (e) => {
        isAdmin = JSON.parse(document.getElementById('user_id').textContent);
        staffContent = document.getElementById("staff_content");
        studentContent = document.getElementById("table_content");
        tableButtons = document.querySelectorAll('.table__row');
        searchInput = document.getElementById('search_input')
        searchButton = document.getElementById("search_button");
        noResultDiv = document.createElement('div')

        // Event listener on the search button so that it can filter the table when it is clicked; 
        searchButton.addEventListener("click", (event) => {

            event.preventDefault();
            // Get text from the search Bar 
            const query = searchInput.value.toLowerCase();
            // Clear the table 
            tableContent.innerHTML = ""
            // Filter the data using the query 
            const searchResult = [...tableData].filter((item) => {
                let result = item["name"].toLowerCase().includes(query);
                return result

            })
            // if search result is empty
            if (searchResult.length == 0) {

                noResultDiv.innerHTML = `<p> No result for this search </p>`
                tableContent.appendChild(noResultDiv)
            }

            // Repopulate the table 
            getTableContent(searchResult)
        });

        // Event listeners on the Table columns so that they can sort the table when clicked 
        [...tableButtons].map((button) => {
            button.addEventListener("click", (event) => {

                resetButtons(event);

                if (event.target.getAttribute('data-dir') == 'desc') {
                    sortRow(tableData, event.target.innerHTML.toLowerCase(), "asc")
                    event.target.setAttribute('data-dir', 'asc')
                } else {
                    sortRow(tableData, event.target.innerHTML.toLowerCase(), "desc")
                    event.target.setAttribute('data-dir', 'desc')

                }

            })
        })


        getTableContent(studentData, studentContent);
        getTableContent(staffData, staffContent, true);

    });
</script>
{{ request.user.is_staff|json_script:"user_id" }}

<div id="modal_overlay" style="display: none;"></div>
<div class="modal" id="delete_modal" style="visibility: hidden;">
    <h1>Delete Confirmation</h1>
    <p id="delete_confirm_text"></p>
    <input type="number" name="delete_id" id="delete_id" style="display: none;">
    <div class="modal__buttons">
        <button type="button" class="styled__button cancel" onclick="handleDelete()">Yes, Delete</button>
        <button type="button" class="styled__button " onclick="toggleDeleteModal()">Cancel</button>
    </div>
</div>



<form action="/api/user/update" method="post" id="edit_modal" class="modal" style="visibility: hidden;">

    <section>
        <div class="input__container">
            <div class="input__label">
                <p>First Name</p>
            </div>
            <input type="text" class="input__field" name="first_name" maxlength="150" id="update_first_name">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Last Name</p>
            </div>
            <input type="text" class="input__field" name="last_name" maxlength="150" id="update_last_name">
        </div>
    </section>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>User Name</p>
            </div>
            <input class="input__field" type="text" name="username" required id="update_username">
        </div>

        <div class="input__container">
            <label for="id_current_course">Current Department:</label>
            <select class="input__field" name="department" id="update_department">
                <option value="CS">Computer Science</option>
                <option value="ENG">English Literature</option>
                <option value="MATH">Mathematics</option>
                <option value="CHEM">Chemistry</option>
                <option value="PHYS">Physics</option>
                <option value="HIST">History</option>
                <option value="PSYC">Psychology</option>
                <option value="BIO">Biology</option>
                <option value="ART">Fine Arts</option>
                <option value="ECON">Economics</option>
                <option value="PHIL">Philosophy</option>
                <option value="BUS">Buisness Adminstration</option>
                <option value="EDUC">Education</option>
                <option value="MED">Medical</option>
                <option value="LAW">Law</option>
                <option value="ARCH">Architecture</option>
                <option value="MUSIC">Music</option>
                <option value="NURS">Nursing</option>
                <option value="COMM">Communication Studies</option>
                <option value="SOC">Sociology</option>
            </select>
        </div>

    </section>


    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Staff Id: </p>
            </div>
            <input class="input__field" type="text" name="staff_id" maxlength="150" id="update_staff_id">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Role</p>
            </div>
            <div class="input__field">
                <input style type="checkbox" name="is_staff" id="update_role"> Admin </input>
            </div>
        </div>


    </section>
    <div class="input__container">
        <div class="input__label">
            <p>Email</p>
        </div>
        <input type="email" class="input__field" name="email" maxlength="320" required="" id="update_email">

    </div>
    <!-- <section>
        <div class="input__container">
            <div class="input__label">
                <p>Password</p>
            </div>
            <input type="text" class="input__field" name="password1" id="update_password1">
        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Confirm Password</p>
            </div>
            <input type="text" class="input__field" name="password2" required id="update_password2">
        </div>

        
    </section> -->
    <input type="number" name="user_type" value="staff" style="display: none;">
    <input type="text" id="update_id" value="default" style="display: none;">
    <section class="modal__buttons">
        <button type="button" class="styled__button" onclick="handleStaffEdit()">Update</button>
        <button type="button" class="styled__button cancel" onclick="toggleEditModal(false, true)">Cancel</button>
    </section>
</form>


<form action="/api/user/update" method="post" id="student_edit_modal" class="modal" style="visibility: hidden;">
    <input type="text" id="student_update_id" value="default" style="display: none;">

    <section>
        <div class="input__container">
            <div class="input__label">
                <p>First Name</p>
            </div>
            <input type="text" class="input__field" name="first_name" maxlength="150" id="student_update_first_name">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Last Name</p>
            </div>
            <input type="text" class="input__field" name="last_name" maxlength="150" id="student_update_last_name">
        </div>
    </section>
        <div class="input__container">
            <div class="input__label">
                <p>User Name</p>
            </div>
            <input class="input__field" type="text" name="username" required id="student_update_username">
        </div>

       


    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Student Id: </p>
            </div>
            <input class="input__field" type="text" name="staff_id" maxlength="150" id="student_update_student_id">

        </div>

        <div class="input__container">
            <label for="id_current_course">Current Department:</label>
            <select class="input__field" name="current_course" id="student_update_current_course">
                <option value="CS">Computer Science</option>
                <option value="ENG">English Literature</option>
                <option value="MATH">Mathematics</option>
                <option value="CHEM">Chemistry</option>
                <option value="PHYS">Physics</option>
                <option value="HIST">History</option>
                <option value="PSYC">Psychology</option>
                <option value="BIO">Biology</option>
                <option value="ART">Fine Arts</option>
                <option value="ECON">Economics</option>
                <option value="PHIL">Philosophy</option>
                <option value="BUS">Buisness Adminstration</option>
                <option value="EDUC">Education</option>
                <option value="MED">Medical</option>
                <option value="LAW">Law</option>
                <option value="ARCH">Architecture</option>
                <option value="MUSIC">Music</option>
                <option value="NURS">Nursing</option>
                <option value="COMM">Communication Studies</option>
                <option value="SOC">Sociology</option>
            </select>
        </div>


    </section>
    <div class="input__container">
        <div class="input__label">
            <p>Email</p>
        </div>
        <input type="email" class="input__field" name="email" maxlength="320" required="" id="student_update_email">

    </div>
    <input type="number" name="user_type" value="staff" style="display: none;">
    <section class="modal__buttons">
        <button type="button" class="styled__button" onclick="handleStudentEdit()">Update</button>
        <button type="button" class="styled__button cancel" onclick="toggleEditModal()">Cancel</button>
    </section>
</form>


<form action="/api/user/new" method="post" id="new_staff_modal" class="modal" style="visibility: hidden; ">
    <h1>Create new Staff </h1>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>First Name</p>
            </div>
            <input type="text" class="input__field" name="first_name" maxlength="150" id="id_first_name">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Last Name</p>
            </div>
            <input type="text" class="input__field" name="last_name" maxlength="150" id="id_last_name">
        </div>
    </section>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>User Name</p>
            </div>
            <input class="input__field" type="text" name="username" autofocus="" autocapitalize="none"
                autocomplete="username" maxlength="150" required id="id_username">
        </div>

        <div class="input__container">
            <label for="id_current_course">Current Department:</label>
            <select class="input__field" name="department" id="id_current_department">
                <option value="CS">Computer Science</option>
                <option value="ENG">English Literature</option>
                <option value="MATH">Mathematics</option>
                <option value="CHEM">Chemistry</option>
                <option value="PHYS">Physics</option>
                <option value="HIST">History</option>
                <option value="PSYC">Psychology</option>
                <option value="BIO">Biology</option>
                <option value="ART">Fine Arts</option>
                <option value="ECON">Economics</option>
                <option value="PHIL">Philosophy</option>
                <option value="BUS">Buisness Adminstration</option>
                <option value="EDUC">Education</option>
                <option value="MED">Medical</option>
                <option value="LAW">Law</option>
                <option value="ARCH">Architecture</option>
                <option value="MUSIC">Music</option>
                <option value="NURS">Nursing</option>
                <option value="COMM">Communication Studies</option>
                <option value="SOC">Sociology</option>
            </select>
        </div>

    </section>


    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Staff Id: </p>
            </div>
            <input class="input__field" type="text" name="staff_id" maxlength="150" id="id_staff">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Role</p>
            </div>
            <div class="input__field">
                <input style type="checkbox" name="is_staff" id="id_role"> Admin </input>
            </div>
        </div>


    </section>
    <div class="input__container">
        <div class="input__label">
            <p>Email</p>
        </div>
        <input type="email" class="input__field" name="email" maxlength="320" required="" id="id_email">

    </div>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Password</p>
            </div>
            <input type="text" class="input__field" name="password1" id="id_password1">
        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Confirm Password</p>
            </div>
            <input type="text" class="input__field" name="password2" required id="id_password2">
        </div>

        <input type="number" name="user_type" value="staff" style="display: none;">

    </section>
    <section class="modal__buttons">
        <button type="button" class="styled__button" onclick="handleStaffAdd()">Create</button>
        <button type="button" class="styled__button cancel" onclick="toggleStaffAddModal()">Cancel</button>
    </section>
</form>

<form action="/api/user/new" method="post" id="new_student_modal" class="modal" style="visibility: hidden; ">
    <h1>Create new Staff </h1>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>First Name</p>
            </div>
            <input type="text" class="input__field" name="first_name" maxlength="150" id="student_first_name">

        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Last Name</p>
            </div>
            <input type="text" class="input__field" name="last_name" maxlength="150" id="student_last_name">
        </div>
    </section>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>User Name</p>
            </div>
            <input class="input__field" type="text" name="username" autofocus="" autocapitalize="none"
                autocomplete="username" maxlength="150" required id="student_username">
        </div>

        <div class="input__container">
            <label for="student_current_course">Current Course:</label>
            <select class="input__field" name="current_course" id="student_current_course">
                <option value="CS101">BSc in Computer Science</option>
                <option value="ENG201">BA in English Literature</option>
                <option value="MATH301">BSc in Mathematics</option>
                <option value="CHEM101">BSc in Chemistry</option>
                <option value="PHYS202">BSc in Physics</option>
                <option value="HIST102">BA in History</option>
                <option value="PSYC301">BSc in Psychology</option>
                <option value="BIO101">BSc in Biology</option>
                <option value="ART205">BFA in Fine Arts</option>
                <option value="ECON202">BSc in Economics</option>
                <option value="PHIL101">BA in Philosophy</option>
                <option value="BUS301">BBA</option>
                <option value="EDUC202">Bachelor of Education</option>
                <option value="MED101">MBBS</option>
                <option value="LAW201">LLB</option>
                <option value="ARCH301">BArch</option>
                <option value="MUSIC202">BMus</option>
                <option value="NURS101">BSN</option>
                <option value="COMM301">BA in Communication Studies</option>
                <option value="SOC101">BA in Sociology</option>
            </select>
        </div>

    </section>


    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Student Id: </p>
            </div>
            <input class="input__field" type="text" name="student_id" maxlength="150" id="add_student_id">

        </div>



    </section>
    <div class="input__container">
        <div class="input__label">
            <p>Email</p>
        </div>
        <input type="email" class="input__field" name="email" maxlength="320" required="" id="student_email">

    </div>
    <section>
        <div class="input__container">
            <div class="input__label">
                <p>Password</p>
            </div>
            <input type="text" class="input__field" name="password1" id="student_password1">
        </div>

        <div class="input__container">
            <div class="input__label">
                <p>Confirm Password</p>
            </div>
            <input type="text" class="input__field" name="password2" required id="student_password2">
        </div>

        <input type="number" name="user_type" value="staff" style="display: none;">

    </section>
    <section class="modal__buttons">
        <button type="button" class="styled__button" onclick="handleStudentAdd()">Create</button>
        <button type="button" class="styled__button cancel" onclick="toggleStudentAddModal()">Cancel</button>
    </section>
</form>



<div class="dashboard">
    <section class="multiple_tables">
        <h1>Staff List</h1>
        <form class="equipment__filter">
            <section class="input__container search">
                <input class="input__field" type="text" name="searchInput" autofocus="" maxlength="150"
                    id="staff_search_input">
                <button class="styled__button" id="staff_search_button"> Search </button>
            </section>
            {% if user.is_staff %}
            <button class="styled__button " id="add_staff" type="button" onclick="toggleStaffAddModal()"> Add Staff
            </button>
            {%endif%}
        </form>
        <table id="dashboard_table">
            <thead>
                <tr>
                    <th><button class="table__row">Id</button></th>
                    <th><button class="table__row">Username</button></th>
                    <th><button class="table__row">First Name</button></th>
                    <th><button class="table__row">Last Name</button></th>
                    <th><button class="table__row">Staff Id</button></th>
                    <th><button class="table__row">Department</button></th>
                    <th><button class="table__row">Admin</button></th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="staff_content"></tbody>
        </table>
    </section>
    <section class="multiple_tables">
        <h1>User List</h1>
        <form class="equipment__filter">
            <section class="input__container search">
                <input class="input__field" type="text" name="searchInput" autofocus="" maxlength="150"
                    id="student_search_input">
                <button class="styled__button" id="search_button"> Search </button>
            </section>
            {% if user.is_staff %}
            <button class="styled__button " id="add_student" type="button" onclick="toggleStudentAddModal()"> Add
                Student
            </button>
            {%endif%}
        </form>
        <table id="dashboard_table">
            <thead>
                <tr>
                    <th><button class="table__row">Id</button></th>
                    <th><button class="table__row">Username</button></th>
                    <th><button class="table__row">First Name</button></th>
                    <th><button class="table__row">Last Name</button></th>
                    <th><button class="table__row">Student Id</button></th>
                    <th><button class="table__row">Course</button></th>
                    <th><button class="table__row">Campus</button></th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="table_content"></tbody>
        </table>
    </section>
</div>

{%endblock content %}